function radar_visualization(t){var r=42;function e(){var t=1e4*Math.sin(r++);return t-Math.floor(t)}function a(t,r){return t+.5*(e()+e())*(r-t)}const n=[{radial_min:0,radial_max:.5,factor_x:1,factor_y:1},{radial_min:.5,radial_max:1,factor_x:-1,factor_y:1},{radial_min:-1,radial_max:-.5,factor_x:-1,factor_y:-1},{radial_min:-.5,radial_max:0,factor_x:1,factor_y:-1}],i=[{radius:130},{radius:220},{radius:310},{radius:400}],l=-675,o=-420,s=-675,f=420,c=[{x:450,y:90},{x:-675,y:90},{x:-675,y:-310},{x:450,y:-310}];function d(t){var r=t.x,e=t.y;return{t:Math.atan2(e,r),r:Math.sqrt(r*r+e*e)}}function y(t){return{x:t.r*Math.cos(t.t),y:t.r*Math.sin(t.t)}}function u(t,r,e){var a=Math.min(r,e),n=Math.max(r,e);return Math.min(Math.max(t,a),n)}function p(t,r,e){return{t:t.t,r:u(t.r,r,e)}}function x(t,r,e){return{x:u(t.x,r.x,e.x),y:u(t.y,r.y,e.y)}}function h(t,r){var l={t:n[t].radial_min*Math.PI,r:0==r?30:i[r-1].radius},o={t:n[t].radial_max*Math.PI,r:i[r].radius},s={x:15*n[t].factor_x,y:15*n[t].factor_y},f={x:i[3].radius*n[t].factor_x,y:i[3].radius*n[t].factor_y};return{clipx:function(t){var r=p(d(x(t,s,f)),l.r+15,o.r-15);return t.x=y(r).x,t.x},clipy:function(t){var r=p(d(x(t,s,f)),l.r+15,o.r-15);return t.y=y(r).y,t.y},random:function(){return y({t:(t=l.t,r=o.t,t+e()*(r-t)),r:a(l.r,o.r)});var t,r}}}for(var m=0;m<t.entries.length;m++){(w=t.entries[m]).segment=h(w.quadrant,w.ring);var v=w.segment.random();w.x=v.x,w.y=v.y,w.color=w.active||t.print_layout?t.rings[w.ring].color:t.colors.inactive}for(var g=new Array(4),_=0;_<4;_++){g[_]=new Array(4);for(var b=0;b<4;b++)g[_][b]=[]}for(m=0;m<t.entries.length;m++){var w=t.entries[m];g[w.quadrant][w.ring].push(w)}var M=1;for(var _ of[2,3,1,0])for(b=0;b<4;b++){var z=g[_][b];z.sort(function(t,r){return t.label.localeCompare(r.label)});for(m=0;m<z.length;m++)z[m].id=""+M++}function k(t,r){return"translate("+t+","+r+")"}var A=d3.select("svg#"+t.svg_id).style("background-color",t.colors.background).attr("width",t.width).attr("height",t.height),H=A.append("g");"zoomed_quadrant"in t?A.attr("viewBox",function(t){return[Math.max(0,400*n[t].factor_x)-420,Math.max(0,400*n[t].factor_y)-420,440,440].join(" ")}(t.zoomed_quadrant)):H.attr("transform",k(t.width/2,t.height/2));var q=H.append("g");q.append("line").attr("x1",0).attr("y1",-400).attr("x2",0).attr("y2",400).style("stroke",t.colors.grid).style("stroke-width",1),q.append("line").attr("x1",-400).attr("y1",0).attr("x2",400).attr("y2",0).style("stroke",t.colors.grid).style("stroke-width",1);for(m=0;m<i.length;m++)q.append("circle").attr("cx",0).attr("cy",0).attr("r",i[m].radius).style("fill","none").style("stroke",t.colors.grid).style("stroke-width",1),t.print_layout&&q.append("text").text(t.rings[m].name).attr("y",62-i[m].radius).attr("text-anchor","middle").style("fill","#e5e5e5").style("font-family","Arial, Helvetica").style("font-size",42).style("font-weight","bold").style("pointer-events","none").style("user-select","none");function B(t,r,e=null){var a=r<2?0:120,n=null==e?-16:12*e;return r%2==1&&(n=n+36+12*g[t][r-1].length),k(c[t].x+a,c[t].y+n)}if(t.print_layout){H.append("text").attr("transform",k(l,o)).text(t.title).style("font-family","Arial, Helvetica").style("font-size","34"),H.append("text").attr("transform",k(s,f)).text("▲ moved up     ▼ moved down").attr("xml:space","preserve").style("font-family","Arial, Helvetica").style("font-size","10");var P=H.append("g");for(_=0;_<4;_++){P.append("text").attr("transform",k(c[_].x,c[_].y-45)).text(t.quadrants[_].name).style("font-family","Arial, Helvetica").style("font-size","18");for(b=0;b<4;b++)P.append("text").attr("transform",B(_,b)).text(t.rings[b].name).style("font-family","Arial, Helvetica").style("font-size","12").style("font-weight","bold"),P.selectAll(".legend"+_+b).data(g[_][b]).enter().append("text").attr("class","legend"+_+b).attr("transform",function(t,r){return B(_,b,r)}).text(function(t,r){return t.id+". "+t.label}).style("font-family","Arial, Helvetica").style("font-size","11")}}var C=H.append("g").attr("id","rink"),I=H.append("g").attr("id","bubble").attr("x",0).attr("y",0).style("opacity",0).style("pointer-events","none").style("user-select","none");I.append("rect").attr("rx",4).attr("ry",4).style("fill","#333"),I.append("text").style("font-family","sans-serif").style("font-size","10px").style("fill","#fff"),I.append("path").attr("d","M 0,0 10,0 5,8 z").style("fill","#333");var j=C.selectAll(".blip").data(t.entries).enter().append("g").attr("class","blip").on("mouseover",function(r){if(r.active||t.print_layout){var e=d3.select("#bubble text").text(r.label).node().getBBox();d3.select("#bubble").attr("transform",k(r.x-e.width/2,r.y-16)).style("opacity",.8),d3.select("#bubble rect").attr("x",-5).attr("y",-e.height).attr("width",e.width+10).attr("height",e.height+4),d3.select("#bubble path").attr("transform",k(e.width/2-5,3))}}).on("mouseout",function(t){d3.select("#bubble").attr("transform",k(0,0)).style("opacity",0)});j.each(function(r){var e=d3.select(this);if(!t.print_layout&&r.active&&r.hasOwnProperty("link")&&(e=e.append("a").attr("xlink:href",r.link)),r.moved>0?e.append("path").attr("d","M -11,5 11,5 0,-13 z").style("fill",r.color):r.moved<0?e.append("path").attr("d","M -11,-5 11,-5 0,13 z").style("fill",r.color):e.append("circle").attr("r",9).attr("fill",r.color),r.active||t.print_layout){var a=t.print_layout?r.id:r.label.match(/[a-z]/i);e.append("text").text(a).attr("y",3).attr("text-anchor","middle").style("fill","#fff").style("font-family","Arial, Helvetica").style("font-size",function(t){return a.length>2?"8":"9"}).style("pointer-events","none").style("user-select","none")}}),d3.forceSimulation().nodes(t.entries).velocityDecay(.19).force("collision",d3.forceCollide().radius(12).strength(.85)).on("tick",function(){j.attr("transform",function(t){return k(t.segment.clipx(t),t.segment.clipy(t))})})}